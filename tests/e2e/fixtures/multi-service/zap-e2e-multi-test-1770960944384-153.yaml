project: e2e-multi-test-1770960944384-153
env_files: [.env]
native:
  database:
    cmd: 'node -e "console.log(\"Database started\"); setInterval(() => { console.log(\"Database heartbeat\"); }, 5000);"'
    env: [PORT=5432]
    healthcheck: 5

  api:
    cmd: 'node -e "console.log(\"API started\"); setInterval(() => { console.log(\"API heartbeat\"); }, 5000);"'
    env: [PORT=3000, DB_HOST, DB_PORT]
    depends_on:
      - database
    healthcheck: 5

  frontend:
    cmd: 'node -e "console.log(\"Frontend started\"); setInterval(() => { console.log(\"Frontend heartbeat\"); }, 5000);"'
    env: [PORT=8080, API_URL]
    depends_on:
      - api
    profiles: [dev]
    healthcheck: 5

  worker:
    cmd: 'node -e "console.log(\"Worker started\"); let count = 0; setInterval(() => { count++; console.log(\"Worker processed job #\" + count); }, 5000);"'
    env: [DB_HOST, DB_PORT, API_URL]
    depends_on:
      - database
      - api
    profiles: [prod]