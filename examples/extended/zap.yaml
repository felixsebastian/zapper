project: myproj
env_files: [.env]
git_method: ssh
bare_metal:
  frontend:
    aliases: [f]
    cmd: npm run dev
    cwd: ./frontend
    env: [PORT, API_URL]
    repo: myorg/frontend
  api:
    aliases: [a]
    cmd: npm run dev
    cwd: ./api
    env: [PORT, DATABASE_URL]
    repo: myorg/api
containers:
  database:
    aliases: [db]
    image: postgres:15
    ports:
      - "5432:5432"
    env: [POSTGRES_DB, POSTGRES_USER, POSTGRES_PASSWORD]
    volumes:
      - name: postgres_data
        internal_dir: /var/lib/postgresql/data
  redis:
    name: redis
    image: redis:7-alpine
    ports:
      - "6379:6379"
